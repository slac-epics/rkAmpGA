
record(bo, "$(P):RFEnable") {
    field(DESC, "Set device operation state")
    field(DTYP, "asynInt32")
    field(OUT, "@asyn($(OUTPORT), 0)")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
}

# Readback for RUN
record(bi, "$(P):RFEnableRBV") {
    field(DESC, "Device operation state readback")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 0)")
    field(ZNAM, "Disabled")
    field(ONAM, "Enabled")
    field(ZSV, "MINOR")
    field(OSV, "NO_ALARM")
    field(SCAN, "I/O Intr")
}

record(bo, "$(P):FaultIntReset") {
    field(DESC, "Device reset")
    field(DTYP, "asynInt32")
    field(OUT, "@asyn($(OUTPORT), 1)")
}

# Readback for forward power
record(longin, "$(P):FwdPwr") {
    field(DESC, "Forward out power readback")
    field(EGU, "W")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 2)")
    field(SCAN, "I/O Intr")
    # Register range 1-999W, however the hardware can only handle 600W out
    # Docs say 10-999W register range, but it actually reports 1W when not operating.
    field(HOPR, "600")
    field(LOPR, "1")
    field(HIHI, "$(FWD_HIHI=600)")
    field(HIGH, "$(FWD_HIGH=)")
    field(LOLO, "$(FWD_LOLO=1)")
    field(LOW, "$(FWD_LOW=)")
    field(LSV, "$(FWD_LSV=NO_ALARM)")
    field(HSV, "$(FWD_HSV=NO_ALARM)")
    field(HHSV, "$(FWD_HHSV=MAJOR)")
    field(LLSV, "$(FWD_LLSV=MAJOR)")
    info(autosaveFields, "HIHI HIGH LOW LOLO HSV HHSV LSV LLSV HYST")
}

# Readback for ref power
record(longin, "$(P):RefPwr") {
    field(DESC, "Out reflected power readback")
    field(EGU, "W")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 3)")
    field(SCAN, "I/O Intr")
    # Register range 10-999W, however the hardware can only handle 250W out
    # Docs say 10-999W register range, but it actually reports 1W when not operating.
    field(HOPR, "250")
    field(LOPR, "1")
    field(HIHI, "$(REF_HIHI=250)")
    field(LOLO, "$(REF_LOLO=1)")
    field(HIGH, "$(REF_HIGH=)")
    field(LOW, "$(REF_LOW=)")
    field(LSV, "$(REF_LSV=NO_ALARM)")
    field(HSV, "$(REF_HSV=NO_ALARM)")
    field(HHSV, "$(REF_HHSV=MAJOR)")
    field(LLSV, "$(REF_LLSV=MAJOR)")
    info(autosaveFields, "HIHI HIGH LOW LOLO HSV HHSV LSV LLSV HYST")
}

record(bi, "$(P):FwdPwrFault") {
    field(DESC, "Forward out power exceeds 600W")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 4)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}

record(bi, "$(P):RefPwrFault") {
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 5)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}

record(bi, "$(P):TempFault") {
    field(DESC, "Over-temp fault")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 6)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}

record(bi, "$(P):10VPSFault") {
    field(DESC, "10V power supply fault")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 7)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}

record(bi, "$(P):48VPSFault") {
    field(DESC, "48V power supply fault")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 8)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}

record(bi, "$(P):PulseWidthFault") {
    field(DESC, "Pulse width >6uS or pulse duty >2% fault")
    field(DTYP, "asynInt32")
    field(INP, "@asyn($(INPORT), 9)")
    field(OSV, "MAJOR")
    field(ZNAM, "OK")
    field(ONAM, "FAULT")
    field(SCAN, "I/O Intr")
}
